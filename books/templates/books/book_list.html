{% extends "books/base_books.html" %}


{% block title %}Books{% endblock %}


{% block content_title %}
  <h2>Books</h2>
  {% include "books/_nav.html" %}
{% endblock %}


{% block content %}
  <table class="book_table">
    <tr>
      <th>Title</th>
      <th>Authors</th>
      <th>Progress</th>
    </tr>
  {% for book in object_list %}
    <tr>
      <td class="title"><a href="{{ book.get_absolute_url }}">{{ book.title }}{% if book.prefix %}, {{ book.prefix }}{% endif %}</a></td>
      <td class="authors">{% for author in book.authors.all %}<a href="{{ author.get_absolute_url }}">{{ author.full_name }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}</td>
      <td class="read">
        {% ifnotequal book.bookmark book.pages %}
        {% ifnotequal book.bookmark 0 %}
        <span class="progress">
          <span class="progress_bar" style="width:{% widthratio book.bookmark book.pages 100 %}%;">
            <span class="pages_read">{{ book.bookmark }}</span>
          </span>
          <span class="pages_total">{{ book.pages }}</span>
        </span>
        {% else %}
        Haven't started
        {% endifnotequal %}
        {% else %}
        <strong>Finished</strong>
        {% endifnotequal %}
      </td>
    </tr>
  {% endfor %}
  </table>
{% endblock %}